---
layout: post
title: Kotlin-ç±»ä¸å¯¹è±¡ç¯‡
date: 2017-06-08
category: æŠ€æœ¯
tags: kotlin
keywords: [kotlin,ç±»,å¯¹è±¡,æ„é€ å™¨]
---

æœ¬æ–‡ä¸»è¦ä»‹ç» `Kotlin` ç±»ä¸å¯¹è±¡ã€‚

çœ‹äº†å®˜æ–¹æ–‡æ¡£çš„ç›¸å…³æè¿°ï¼Œå‘ç°å¾ˆå¤šåè¯åœ¨ `Kotlin` ä¸­å’Œ `Java` éƒ½æœ‰ä¸å¤ªä¸€æ ·ï¼Œåœ¨ `Kotlin` ä¸­ `æ–¹æ³•` è¢«ç§°ä¸º `å‡½æ•°`ï¼Œè€Œåƒ `open` , `final` è¿™ç§å…³é”®å­—è¢«ç§°ä¸ºæ³¨è§£(`annotation`)ï¼Œåœ¨æˆ‘ä¹‹å‰çš„è®¤çŸ¥å½“ä¸­åªæœ‰ `@Inject` è¿™ç§æ‰æ˜¯æ³¨è§£ã€‚å› æ­¤æ–‡ç« ä¸­çš„æè¿°éƒ½å°½é‡ä½¿ç”¨ `Kotlin` ä¸­çš„æœ¯è¯­ã€‚

<!--more-->

## å±æ€§ä¸åŸŸ
`Kotlin` ä¸­ï¼Œä½¿ç”¨ `val` å£°æ˜å¸¸é‡(ä¸å¯å˜)ï¼Œä½¿ç”¨ `var` å£°æ˜å˜é‡(å¯å˜)ã€‚

```kotlin
public val a = 100 // å¸¸é‡ï¼Œä¸å¯å˜ï¼Œå½“ä½ å†æƒ³æ”¹å˜ä»–çš„å€¼æ—¶ä¼šæŠ¥é”™
private var b = 1000 // å˜é‡ï¼Œå¯å˜
b = -100

val c:Int? = null
```

### å±æ€§çš„å£°æ˜

å£°æ˜å±æ€§çš„å®Œæ•´è¯­æ³•å¦‚ä¸‹ï¼Œå…¶ä¸­çš„åˆå§‹åŒ–å™¨(`initializer`)ï¼Œ å–å€¼æ–¹æ³•(`getter`)ï¼Œ ä»¥åŠè®¾å€¼æ–¹æ³•(`setter`)éƒ½æ˜¯å¯é€‰çš„ã€‚`Kotlin` å…·æœ‰ç±»å‹è‡ªåŠ¨æ¨æ–­å¾—ç‰¹æ€§ï¼Œå¦‚æœå±æ€§ç±»å‹å¯ä»¥é€šè¿‡åˆå§‹åŒ–å™¨è‡ªåŠ¨æ¨æ–­å¾—åˆ°ï¼Œ æˆ–è€…å¯ä»¥é€šè¿‡è¿™ä¸ªå±æ€§è¦†ç›–çš„åŸºç±»æˆå‘˜å±æ€§æ¨æ–­å¾—åˆ°ï¼Œ åˆ™å±æ€§ç±»å‹çš„å£°æ˜ä¹Ÿå¯ä»¥çœç•¥ã€‚

æ ‡å‡†çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œéœ€è¦æ¸…æ¥šå…¶ä¸­å‡ ä¸ªæ¦‚å¿µ

> - `propertyName` ï¼šå˜é‡å
> - `PropertyType` ï¼šå˜é‡ç±»å‹ï¼Œå¦‚æœå¯ä»¥æ¨æ–­å¾—åˆ°ï¼Œå¯ä»¥çœç•¥
> - `property_initializer` ï¼šåˆå§‹åŒ–å™¨ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå›ºå®šå€¼æˆ–ä¸€ä¸ªè¡¨è¾¾å¼
> - `getter` ï¼šå–å€¼æ–¹æ³•ï¼Œè®¿é—®å™¨çš„ä¸€ç§
> - `setter` ï¼šè®¾å€¼æ–¹æ³•ï¼Œè®¿é—®å™¨çš„ä¸€ç§

```kotlin
var <propertyName>: <PropertyType> [= <property_initializer>]
    [<getter>]
    [<setter>]
   
```

æ³¨æ„ï¼Œå¦‚ä¸‹æ³¨é‡Š `1` å¤„ï¼Œå¯¹äº `var` å˜é‡æ¥è¯´ï¼Œåˆå§‹åŒ–å™¨ï¼Œè®¾å€¼ï¼Œå–å€¼æ–¹æ³•éƒ½æ˜¯å…è®¸åŒæ—¶å­˜åœ¨çš„ï¼›å¦‚ä¸‹æ³¨é‡Š `2` å¤„ï¼Œå¯¹äº `val` å˜é‡æ¥è¯´ï¼Œä¸å…è®¸æœ‰è®¾å€¼æ–¹æ³•ï¼ŒåŒæ—¶ `getter` æ–¹æ³•å’Œ `åˆå§‹åŒ–å™¨` ä¸å…è®¸åŒæ—¶æŒ‡å®šï¼Œå› ä¸ºåªè¯»å˜é‡åªå…è®¸åˆå§‹åŒ–ä¸€æ¬¡ã€‚

ä½¿ç”¨ **æ³¨è§£** å’Œ **å¯è§åº¦ä¿®é¥°ç¬¦**ï¼Œå¦‚ä¸‹æ³¨é‡Š `3` å¤„ï¼Œï¼Œå¦‚æœä¸æƒ³åœ¨å¤–ç•Œè®¿é—®å±æ€§çš„ `setï¼get` æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨å¯è§åº¦ä¿®é¥°ç¬¦æ¥é¿å…å¤–éƒ¨è®¿é—®ã€‚åŒæ ·ä¹Ÿå¯ä»¥åœ¨ `setï¼get` æ–¹æ³•å‰ä½¿ç”¨æ³¨è§£ã€‚


```kotlin
open class ClsA {
    // 1
    var x: Int = 100
        get() = 100
        set(value) {
            field = value
        }
        
    // 2. ä¸å…è®¸æœ‰è®¾å€¼æ–¹æ³•ï¼ŒåŒæ—¶getæ–¹æ³•å’Œåˆå§‹åŒ–å™¨ä¸å…è®¸åŒæ—¶æŒ‡å®šï¼Œå› ä¸ºåªè¯»å˜é‡åªå…è®¸åˆå§‹åŒ–ä¸€æ¬¡
    val y: Int
        get() = 100
    // è¿™æ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºvalåªè¯»çš„
    // set(value) {
    //    field = value
    // }
    
    // 3. åœ¨set/getæ–¹æ³•å‰ä½¿ç”¨å¯è§åº¦ä¿®é¥°ç¬¦å’Œæ³¨è§£
    var z: Int = 100
    @Inject get
    private set
}

eg:
val param:ClsA = ClsA()
// ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºä¸å…è®¸è®¿é—®zçš„è®¾å€¼æ–¹æ³•
param.z = 100
```

### Backing Fields å’Œ Backing Property

- Backing Fields

`Kotlin` æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å±æ€§åç§°å¯¹ç±»çš„å±æ€§è¿›è¡Œè®¿é—®ï¼Œä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥è®¿é—®è¯¥å±æ€§çš„å¼•ç”¨ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘æ—¶è¢«è½¬æ¢æˆäº† `getter/setter` æ–¹æ³•æ¥è¿›è¡Œè®¿é—®ï¼Œå¦‚æ³¨é‡Šä¸­ `1` å¤„ä»£ç ï¼Œè¿™æ ·æˆ‘ä»¬æ—¢å¯ä»¥ç®€åŒ–ä»£ç ï¼Œåˆä¿æŒäº†ç±»çš„å°é—­æ€§ã€‚

`Kotlin` çš„ç±»ä¸­ä¸å…è®¸æ‹¥æœ‰åŸŸ(`Field`)ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨ç±»å†…éƒ¨ä¹Ÿæ— æ³•ç›´æ¥ä½¿ç”¨å±æ€§çš„åç§°å¯¹å±æ€§è¿›è¡Œè®¿é—®ï¼Œè€Œæ˜¯éƒ½ä¼šè½¬æ¢ä¸º `getter/getter` æ–¹æ³•ã€‚å› æ­¤å½“ä½ åœ¨ `set` æ–¹æ³•ä¸­è°ƒç”¨è¯¥å±æ€§ä¸ºä»–èµ‹å€¼æ—¶åˆä¼šè°ƒç”¨ `set` æ–¹æ³•ï¼Œå¯¼è‡´ **å †æ ˆæº¢å‡º**ï¼Œå¦‚å®ä¾‹ä¸­ `2`ï¼Œè¿™æ˜¯æˆ‘åœ¨å¼€å§‹å†™çš„æ—¶å€™é‡åˆ°çš„é—®é¢˜ã€‚

```kotlin
// 1 ä¼ªä»£ç 
ClsA().x = 100 ç›¸å½“äº ClsA().setX(100)
val a = ClsA.x ç›¸å½“äº val a = ClsA().getX()

// 2
var xx: Int = 100
    set(value) {
    	// å†æ¬¡è°ƒç”¨ set æ–¹æ³•
        xx = value + 1
    }
```
ä½†æ˜¯è‡ªå®šä¹‰å±æ€§çš„è®¿é—®å™¨æ—¶ä¸å¯é¿å…çš„è¦ä½¿ç”¨ åŸŸå˜é‡ï¼Œå› æ­¤ `Kotlin` æä¾›äº† `Backing Fields` çš„ç‰¹æ€§ï¼Œä½¿ç”¨å…³é”®å­— `field` è¡¨ç¤ºï¼Œ`field` æ ‡è¯†ç¬¦åªå…è®¸åœ¨å±æ€§çš„è®¿é—®å™¨å‡½æ•°å†…ä½¿ç”¨ï¼Œå¦‚ä¸‹ä»£ç ä¸­ï¼Œä½¿ç”¨ `field` å³å¯çœŸå®çš„è®¿é—®(ä¸ç»è¿‡`getter/setter`) å˜é‡ `xx`ï¼Œå®Œæˆèµ‹å€¼æ“ä½œã€‚

```kotlin
var xx: Int = 100
    get() = field++
    set(value) {
        field = value - 1
    }
```
- Backing Property	

æœ‰æ—¶éšå«çš„åç«¯åŸŸå±æ€§ä¸è¶³ä»¥è§£å†³æŸäº›æƒ…å†µçš„é—®é¢˜ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ `Backing Property`ã€‚å¦‚ä¸‹å®ä¾‹ä¸­ï¼Œ`Backing Property` å°±æ˜¯å¦å¤–å®šä¹‰ä¸€ä¸ªå±æ€§ `_yy` ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œå¤–ç•Œè®¿é—®çš„å±æ€§ `yy` åªæ˜¯æä¾›äº†ä¸€ä¸ªè®¿é—®å™¨æ–¹æ³•è€Œå·²ï¼Œæœ¬èº«å·²ç»ä¸å…·å¤‡ä»€ä¹ˆæ„ä¹‰å•¦ï¼Œå°†è®¿é—®å™¨çš„å£°æ˜å’Œæ•°æ®çš„å­˜å‚¨æ”¾åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼Œå°±ä¸ä¼šå‘ç”Ÿä¹‹å‰çš„å†²çªï¼ˆæˆ‘çš„ç†è§£ğŸ˜Šï¼‰

```kotlin
private var _yy: String? = null

var yy: String
    get() {
        if (_yy == null) {
            _yy = "init str"
        }
        return _yy ?: "be changed"
    }
    set(value) {
        _yy = "this is $value"
    }
    
// è®¿é—®yy
val param: ClsA = ClsA()
param.yy
```

### ç¼–è¯‘æœŸå¸¸æ•°
å¦‚æœå±æ€§å€¼åœ¨ç¼–è¯‘æœŸé—´å°±èƒ½ç¡®å®š, åˆ™å¯ä»¥ä½¿ç”¨ `const` ä¿®é¥°ç¬¦, å°†å±æ€§æ ‡è®°ä¸º **ç¼–è¯‘æœŸå¸¸æ•°å€¼(`compile time constants`)**ã€‚ è¿™ç±»å±æ€§å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶:

> - å¿…é¡»æ˜¯é¡¶çº§å±æ€§ï¼Œ æˆ–è€…æ˜¯ä¸€ä¸ª `object` çš„æˆå‘˜ã€‚
> - å€¼è¢«åˆå§‹åŒ–ä¸º `String` ç±»å‹, æˆ–åŸºæœ¬ç±»å‹(`primitive type`)ã€‚
> - ä¸å­˜åœ¨è‡ªå®šä¹‰çš„å–å€¼æ–¹æ³•ã€‚

```kotlin
// é¡¶çº§å±æ€§
const val TEST_CONST = "TEST_CONST"

// å£°æ˜åœ¨ object ä¸­
object Const{
    const val TEST_CONST_IN_OBJ = "TEST_CONST_IN_OBJ"
}
```

### å±æ€§çš„å»¶è¿Ÿåˆå§‹åŒ–

`lateinit` å…³é”®å­—è¡¨ç¤ºå½“å‰ å˜é‡ ä¸ä¼šåœ¨å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œåˆå§‹åŒ–æ“ä½œä¼šåœ¨åé¢è¿›è¡Œï¼Œåƒæ˜¯ä¸€ç§åè®®æœºåˆ¶ï¼Œå‘ŠçŸ¥ç¼–è¯‘å™¨æˆ‘ä¼šåœ¨åé¢ä½¿ç”¨è¯¥å˜é‡ä¹‹å‰çš„æ°å½“æ—¶æœºåˆå§‹åŒ–è¯¥å˜é‡ï¼Œä¸è¦è¿›è¡Œè­¦å‘Šâš ï¸ã€‚åœ¨ä¸€ä¸ª `lateinit` å±æ€§è¢«åˆå§‹åŒ–ä¹‹å‰è®¿é—®å®ƒï¼Œ ä¼šæŠ›å‡ºä¸€ä¸ªç‰¹åˆ«çš„å¼‚å¸¸ï¼Œè¿™ä¸ªå¼‚å¸¸å°†ä¼šæŒ‡æ˜è¢«è®¿é—®çš„å±æ€§ï¼Œä»¥åŠå®ƒæ²¡æœ‰è¢«åˆå§‹åŒ–è¿™ä¸€é”™è¯¯ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨ `lateinit` å…³é”®å­—æœ‰å¾ˆå¤šé™åˆ¶:

> - å¿…é¡»æ˜¯å˜é‡ï¼Œå³ä½¿ç”¨ `var` å…³é”®å­—è¿›è¡Œå£°æ˜ã€‚   
> - ä¸èƒ½ä¿®é¥°å¯ä¸º `null` çš„ç±»å‹ï¼Œæ¯”å¦‚ `lateinit var str:String?` æ˜¯ç¼–è¯‘ä¸é€šè¿‡çš„ã€‚   
> - ä¸èƒ½ä¿®é¥°åŸºæœ¬æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ `Int`,`Float`ç­‰

```kotlin
lateinit var stuLateInit:Student

stuLateInit = Student("name",11)
```

## æ¥å£

æ¥å£ä½¿ç”¨ `interface` å…³é”®å­—å£°æ˜ï¼›
>- æ¥å£ä¸­å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•çš„å£°æ˜ï¼Œä¹Ÿå¯ä»¥åŒ…å«æ–¹æ³•çš„å®ç°ã€‚
>- æ¥å£ä¸æŠ½è±¡ç±»çš„åŒºåˆ«åœ¨äºï¼Œ æ¥å£ä¸èƒ½å­˜å‚¨çŠ¶æ€æ•°æ®ã€‚ 
>- æ¥å£å¯ä»¥æœ‰å±æ€§ï¼Œ ä½†è¿™äº›å±æ€§å¿…é¡»æ˜¯æŠ½è±¡çš„ï¼Œ æˆ–è€…å¿…é¡»æä¾›è®¿é—®å™¨çš„è‡ªå®šä¹‰å®ç°ã€‚
>- æ¥å£ä¸æ”¯æŒ `Backing Field`ï¼Œå› æ­¤ `var` å˜é‡æ— æ³•å®šä¹‰è®¿é—®å™¨

```kotlin
interface FirstInterface {

    // å¯ä»¥å…·æœ‰å±æ€§ï¼Œä½†æ˜¯å±æ€§å¿…é¡»æ˜¯æŠ½è±¡çš„
    // æˆ–è€…å¿…é¡»æä¾›è®¿é—®å™¨çš„è‡ªå®šä¹‰å®ç°
    val testVal1: Int
    var testVar2: Int
    val testVal3: Int
        get() = 100

    // ç¼–è¯‘é”™è¯¯ï¼Œæ¥å£ä¸æ”¯æŒ backing field
    // å› æ­¤ var ç±»å‹çš„å±æ€§ä¸èƒ½è‡ªå®šä¹‰è®¿é—®å™¨
    var testVar4: Int
        get() = 100

    // ç¼–è¯‘é”™è¯¯ï¼Œå±æ€§å¿…é¡»æ˜¯æŠ½è±¡çš„
    // æˆ–è€…å¿…é¡»æä¾›è®¿é—®å™¨çš„è‡ªå®šä¹‰å®ç°
    val testVal10: Int = 1
    var testVar10: Int = 1

    // å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•çš„å£°æ˜
    fun testFun1()

    // ä¹Ÿå¯ä»¥åŒ…å«æ–¹æ³•çš„å®ç°
    fun testFun2(param: Int): String {
        return "test fun 2"
    }
}
```

### å®ç°æ¥å£

```kotlin

class SecondInterface:FirstInterface{

    // ä½¿ç”¨åˆå§‹åŒ–å™¨è¦†ç›–æ¥å£æŠ½è±¡å±æ€§
    override val testVal1: Int = 10

    // ä½¿ç”¨è‡ªå®šä¹‰è®¿é—®å™¨è¦†ç›–æ¥å£æŠ½è±¡å±æ€§
    override var testVar2: Int
        get() = 100
        set(value) {}

    // è¦†ç›–æ¥å£éæŠ½è±¡å±æ€§
    override val testVal3: Int
        get() = super.testVal3

    // è¦†ç›–æ¥å£æŠ½è±¡æ–¹æ³•
    override fun testFun1() {

    }

    // è¦†ç›–æ¥å£éæŠ½è±¡æ–¹æ³•
    override fun testFun2(param: Int): String {
        return super.testFun2(param)
    }
}
```

### è§£å†³æ¥å£è¦†ç›–å†²çª

ç”±äºæ¥å£æ˜¯å¯ä»¥å¤šç»§æ‰¿çš„ï¼Œå¦‚æœå®ç°å¤šä¸ªæ¥å£ï¼ŒåŒæ—¶æ¥å£ä¸­æœ‰ç›¸åŒæ–¹æ³•çš„å£°æ˜ï¼Œå°±ä¼šå‡ºç°è¦†ç›–å†²çªï¼Œä½¿ç”¨å®˜ç½‘çš„ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹è¦†ç›–å†²çªçš„è§£å†³ã€‚å•ç»§æ‰¿æ—¶è‡ªç„¶è¦å®ç°æ¥å£ä¸­æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå½“å®ç°å¤šä¸ªæ¥å£æ—¶ï¼Œå¦‚æœå®ç°çš„æ¥å£ä¸­å…·æœ‰åŒåçš„æŠ½è±¡æ–¹æ³•ï¼Œå³ä½¿åœ¨æ¥å£ä¸­å¯¹è¯¥æ–¹æ³•éƒ½å·²ç»æœ‰äº†å®ç°ï¼Œé‚£ä¹ˆåœ¨å­ç±»ä¸­ä¹Ÿå¿…é¡»å®ç°è¯¥æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨`super<æ¥å£åç§°>.æ–¹æ³•å`ï¼Œå¦‚ä¸‹é¢çš„ `super<A>.bar()` æ¥åœ¨å­ç±»ä¸­æ˜¾å¼çš„å£°æ˜åˆ°åº•æ˜¯ç»§æ‰¿å“ªä¸€ä¸ªå®ç°ã€‚	

```kotlin
interface A {
    fun foo() { print("A") }
    fun bar()
}

interface B {
    fun foo() { print("B") }
    fun bar() { print("bar") }
}

class C : A {
    override fun bar() { print("bar") }
}

class D : A, B {
    // é‡åå‡½æ•°å¿…é¡»å®ç°ï¼Œå³ä½¿ç»§æ‰¿çš„æ¥å£ä¸­å·²ç»æœ‰äº†å…·ä½“å®ç°
    override fun foo() {
        super<A>.foo()
        super<B>.foo()
    }

    override fun bar() {
        super<B>.bar()
        // ç”±äº A ä¸­å¯¹ bar æ²¡æœ‰å®ç°ï¼Œå¯ä»¥å¦‚ä¸‹ç®€å†™
        // super.bar()
    }
}
```

## ç±»çš„æ„é€ å™¨

`Kotlin` ä¸­çš„ç±»å¯ä»¥æœ‰ä¸€ä¸ª **ä¸»æ„é€ å™¨** (`primary constructor`), ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ª **æ¬¡æ„é€ å™¨** (`secondary constructor`)ã€‚ä¸»æ„é€ å™¨æ˜¯ç±»å¤´éƒ¨çš„ä¸€éƒ¨åˆ†, ä½äºç±»åç§°(ä»¥åŠå¯é€‰çš„ç±»å‹å‚æ•°)ä¹‹åã€‚

### ä¸»æ„é€ å™¨

ä¸»æ„é€ å™¨ç´§è·Ÿåœ¨ç±»ååé¢è¿›è¡Œå£°æ˜ï¼Œå£°æ˜çš„ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼Œå¯è§åº¦ä¿®é¥°ç¬¦é»˜è®¤ä¸º `public`ï¼Œ(å¦‚æœä¸»æ„é€ å™¨æ˜¯ `public` çš„ï¼ŒåŒæ—¶æ²¡æœ‰æ³¨è§£é‚£ä¹ˆå¯ä»¥çœç•¥ `constructor` å…³é”®å­—)ã€‚å½“ç„¶å¦‚æœç±»å†…éƒ¨æ²¡æœ‰å…·ä½“çš„å®ç°ï¼Œ`{}` ä¹Ÿæ˜¯å¯ä»¥çœç•¥çš„ã€‚

```kotlin
// å®Œæ•´çš„å†™æ³•
class Engineer private @Inject constructor(name: String, age: Int, language: String)

// ç®€åŒ–å†™æ³•ï¼Œç”±äºæ˜¯publicçš„ï¼ŒåŒæ—¶æ²¡æœ‰æ³¨è§£ï¼Œçœç•¥äº†constructorå…³é”®å­—
class Engineer (name: String, age: Int, language: String)

// é»˜è®¤ç”Ÿæˆä¸€ä¸ªpublicçš„æ— å‚æ„é€ å™¨
class Engineer
```

ç”±äºä¸»æ„é€ å™¨ä¸­æ— æ³•ä½¿ç”¨åˆå§‹åŒ–ä»£ç ï¼Œå¯ä»¥åœ¨ç±»å†…è¿›è¡Œå±æ€§çš„åˆå§‹åŒ–ï¼Œä½¿ç”¨ `init{}` å…³é”®å­—è¡¨ç¤ºã€‚

```kotlin
class Engineer (name: String, age: Int, language: String) {
    var name: String = ""
    var age:Int = 0
    var language:String = ""

    init {
        this.name = name
        this.age = age
        this.language = language
        log("name = $name,age = $age, lan = $language")
    }
}
```
åœ¨ä¸»æ„é€ å™¨å†…å¯ä»¥ç›´æ¥ä½¿ç”¨ `val` å’Œ `var` å£°æ˜å’Œåˆå§‹åŒ–å±æ€§ï¼Œä»–ä»¬éƒ½æ˜¯ç±»çš„æˆå‘˜å±æ€§ã€‚

```kotlin
class Engineer(val name: String = "", age: Int = 0, language: String = "") {

}
```
> æ³¨æ„: åœ¨ JVM ä¸­, å¦‚æœä¸»æ„é€ å™¨çš„æ‰€æœ‰å‚æ•°éƒ½æŒ‡å®šäº†é»˜è®¤å€¼, ç¼–è¯‘å™¨å°†ä¼šäº§ç”Ÿä¸€ä¸ªé¢å¤–çš„æ— å‚æ•°æ„é€ å™¨, è¿™ä¸ªæ— å‚æ•°æ„é€ å™¨ä¼šä½¿ç”¨é»˜è®¤å‚æ•°å€¼æ¥è°ƒç”¨æ—¢æœ‰çš„æ„é€ å™¨. æœ‰äº›åº“(æ¯”å¦‚ Jackson æˆ– JPA) ä¼šä½¿ç”¨æ— å‚æ•°æ„é€ å™¨æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹, è¿™ä¸ªç‰¹æ€§å°†ä½¿å¾— Kotlin æ¯”è¾ƒå®¹æ˜“ä¸è¿™ç§åº“ååŒå·¥ä½œ.


### æ¬¡çº§æ„é€ å™¨
å¦‚æœç±»æœ‰ä¸»æ„é€ å™¨, é‚£ä¹ˆæ¯ä¸ªæ¬¡çº§æ„é€ å™¨éƒ½å¿…é¡»å§”æ‰˜ç»™ä¸»æ„é€ å™¨, è¦ä¹ˆç›´æ¥å§”æ‰˜, è¦ä¹ˆé€šè¿‡å…¶ä»–æ¬¡çº§æ„é€ å™¨é—´æ¥å§”æ‰˜. å§”æ‰˜åˆ°åŒä¸€ä¸ªç±»çš„å¦ä¸€ä¸ªæ„é€ å™¨æ—¶, ä½¿ç”¨ `this` å…³é”®å­—å®ç°ã€‚

```kotlin
class Engineer(val name: String = "", age: Int = 0, language: String = "") {
    constructor(name: String, age: Int) : this(name, age, "en"){
        log("æ¬¡çº§æ„é€ å™¨")
    }
}
```

### åˆ›å»ºå¯¹è±¡
æ„é€ å™¨ä¸­çš„å±æ€§æŒ‡å®šåˆå§‹å€¼ååœ¨åˆ›å»ºå¯¹è±¡æ—¶å¯ä»¥çœç•¥ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼Œé¿å…é‡è½½æ„é€ æ–¹æ³•ï¼Œä¸»æ„é€ å™¨ä¸­å…·æœ‰é»˜è®¤å€¼çš„å±æ€§ä¸æ˜¯å¿…é¡»èµ‹å€¼çš„ã€‚

```kotlin
val en = Engineer("",12)
val en1 = Engineer(name = "test")
val en2 = Engineer(name = "test",age = 12,language = "")
```

	
## ç»§æ‰¿
`kotlin` ä¸­æ‰€æœ‰çš„ç±»é»˜è®¤ç»§æ‰¿è‡ªè¶…ç±» `Any`,`Any` ä¸æ˜¯ `java.lang.Object`; å°¤å…¶è¦æ³¨æ„, é™¤ `equals()` , `hashCode()` å’Œ `toString()` ä¹‹å¤–, å®ƒæ²¡æœ‰ä»»ä½•æˆå‘˜ã€‚  `Kotlin` ä¸­æ‰€æœ‰çš„ç±»éƒ½æ˜¯ `fnial` çš„ï¼Œä¹Ÿå°±æ˜¯ä¸å…è®¸ç»§æ‰¿ï¼Œè¿™ç‚¹å’Œ `Java` æ­£å¥½ç›¸åï¼Œå¦‚æœä½ æƒ³ç»§æ‰¿ä¸€ä¸ªç±»å¿…é¡»ä½¿ç”¨ `open` å…³é”®å­—å£°æ˜ã€‚ 

`Kotlin` ä½¿ç”¨ `:` è¡¨ç¤ºç»§æ‰¿ï¼Œå­ç±»å’Œçˆ¶ç±»æ„é€ å™¨è°ƒç”¨åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µ

- å¦‚æœç±»æœ‰ä¸»æ„é€ å™¨, é‚£ä¹ˆå¿…é¡»åœ¨ä¸»æ„é€ å™¨ä¸­ä½¿ç”¨ä¸»æ„é€ å™¨çš„å‚æ•°æ¥åˆå§‹åŒ–åŸºç±»ã€‚

```kotlin
open class Engineer(var name: String = "", var age: Int = 0, var language: String = "") {
}

class BigEngineer(var level: Int) : Engineer("name",12) {
}
```

- å¦‚æœç±»æ²¡æœ‰ä¸»æ„é€ å™¨, é‚£ä¹ˆæ‰€æœ‰çš„æ¬¡çº§æ„é€ å™¨éƒ½å¿…é¡»ä½¿ç”¨ `super` å…³é”®å­—æ¥åˆå§‹åŒ–åŸºç±», æˆ–è€…å§”æ‰˜åˆ°å¦ä¸€ä¸ªæ„é€ å™¨, ç”±è¢«å§”æ‰˜çš„æ„é€ å™¨æ¥åˆå§‹åŒ–åŸºç±»ã€‚ æ³¨æ„, è¿™ç§æƒ…å†µä¸‹, ä¸åŒçš„æ¬¡çº§æ„é€ å™¨å¯ä»¥è°ƒç”¨åŸºç±»ä¸­ä¸åŒçš„æ„é€ å™¨ã€‚

```kotlin
open class Engineer(var name: String = "", var age: Int = 0, var language: String = "") {
    
}

class BigEngineer : Engineer {
    var level = 0
    constructor(name:String,age:Int,level:Int):super(name,age,"en"){
        this.level = level
    }
}
```
### æ–¹æ³•çš„è¦†ç›–
å’Œç±»ä¸€æ ·ï¼Œç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½é»˜è®¤æ˜¯ `final` çš„ï¼Œå³ä¸å…è®¸åœ¨å­ç±»ä¸­è¿›è¡Œé‡å†™ï¼Œå¦‚æœæƒ³è¦åœ¨å­ç±»ä¸­æ›´æ”¹ï¼Œéœ€è¦ä½¿ç”¨ `open` æ³¨è§£å£°æ˜ï¼Œå¦‚å®ä¾‹ä¸­ `3`ã€‚

å¦‚æœå­ç±»æƒ³è¦è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¿…é¡»æ·»åŠ  `override` æ³¨è§£ã€‚ å¦‚æœé—æ¼äº†è¿™ä¸ªæ³¨è§£ï¼Œç¼–è¯‘å™¨å°†ä¼šæŠ¥å‘Šé”™è¯¯ã€‚ å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰æ ‡æ³¨ `open` æ³¨è§£ï¼Œ é‚£ä¹ˆåœ¨å­ç±»ä¸­å£°æ˜ä¸€ä¸ªåŒååŒå‚çš„æ–¹æ³•å°†æ˜¯éæ³•çš„, æ— è®ºæ˜¯å¦æ·»åŠ  `override` æ³¨è§£ï¼Œ éƒ½ä¸å¯ä»¥ï¼Œå¦‚å®ä¾‹ä¸­ `4`ã€‚ 

å½“ä¸€ä¸ªå­ç±»æˆå‘˜æ ‡è®°äº† `override` æ³¨è§£æ¥è¦†ç›–çˆ¶ç±»æˆå‘˜æ—¶ï¼Œ è¦†ç›–åçš„å­ç±»æˆå‘˜æœ¬èº«ä¹Ÿå°†æ˜¯ `open` çš„, ä¹Ÿå°±æ˜¯è¯´ï¼Œ å­ç±»æˆå‘˜å¯ä»¥è¢«è‡ªå·±çš„å­ç±»å†æ¬¡è¦†ç›–ï¼Œå¦‚å®ä¾‹ä¸­ `1`ã€‚ å¦‚æœä½ å¸Œæœ›ç¦æ­¢è¿™ç§å†æ¬¡è¦†ç›–ï¼Œå¯ä»¥ä½¿ç”¨ `final` æ³¨è§£ï¼Œå¦‚å®ä¾‹ä¸­ `2`ã€‚

å®ä¾‹ï¼š

```kotlin
open class Engineer(var name: String = "", var age: Int = 0, var language: String = "") {
    open fun test() {}
    open fun test2() {}
    // æ­¤å‡½æ•°ä¸å…è®¸åœ¨å­ç±»è¦†ç›–
    fun test3() {}
}

open class BigEngineer(name: String = "", age: Int = 0, var level: Int = 0) 
    : Engineer(name, age, "en") {
    
    // 1. æ­¤å‡½æ•°è¦†ç›–äº†è¶…ç±»ä¸­çš„å‡½æ•°ï¼Œä»–å°†é»˜è®¤æ˜¯opençš„ï¼Œä»–çš„å­ç±»å¯ä»¥è¦†ç›–è¯¥æ–¹æ³•ã€‚
    override fun test() {}

    // 2. æ­¤å‡½æ•°åœ¨å­ç±»ä¸­å°†ä¸ä¼šè¢«è¦†ç›–ï¼Œå› ä¸ºæ˜¾å¼çš„æ·»åŠ äº†finalæ³¨è§£
    final override fun test2() {}

    // 3. è¿™å¥æ˜¯ç¼–è¯‘é”™è¯¯çš„ï¼Œå› ä¸ºtest3()ä¸æ˜¯opençš„
    // override fun test3() {} 
    
    //  4. è¿™å¥æ˜¯ç¼–è¯‘é”™è¯¯çš„ï¼Œè¶…ç±»ä¸­test3()æ˜¯finalçš„ï¼Œåœ¨å­ç±»ä¸­å£°æ˜åŒååŒå‚çš„å‡½æ•°æ˜¯éæ³•çš„
    // fun test3(){}
}
```

åœ¨ä¸€ä¸ª `final` ç±»(æ¯”å¦‚ï¼Œ ä¸€ä¸ªæ²¡æœ‰æ·»åŠ  `open` æ³¨è§£çš„ç±»)ä¸­ï¼Œ å£°æ˜ `open` æˆå‘˜æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚

```kotlin
class Test{
    // è­¦å‘Šâš ï¸open has no effect in a final classã€‚
    // åœ¨ä¸€ä¸ªfinalç±»ä¸­å£°æ˜openæˆå‘˜æ˜¯æ— æ„ä¹‰çš„ï¼Œå› ä¸ºç±»æ— æ³•è¢«ç»§æ‰¿ï¼Œæˆå‘˜å‡½æ•°å’Œå˜é‡ä¹Ÿæ— æ³•è¢«é‡å†™ã€‚
    open fun test(){}
    open val a = 0
}
```

### å±æ€§çš„è¦†ç›–
å‰æï¼Œå±æ€§çš„è¦†ç›–æ–¹å¼ä¸æ–¹æ³•è¦†ç›–ç±»ä¼¼ï¼ŒåŒæ ·å¿…é¡»åœ¨çˆ¶ç±»ä¸­å£°æ˜ä¸º `open`ï¼Œå½“è¶…ç±»ä¸­å£°æ˜çš„å±æ€§åœ¨åä»£ç±»ä¸­å†æ¬¡å£°æ˜æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ `override` å…³é”®å­—æ¥æ ‡è®°ï¼Œè€Œä¸”è¦†ç›–åçš„å±æ€§æ•°æ®ç±»å‹å¿…é¡»ä¸è¶…ç±»ä¸­çš„å±æ€§æ•°æ®ç±»å‹å…¼å®¹ã€‚ 

å¯ä»¥ä½¿ç”¨å¸¦åˆå§‹åŒ–å™¨çš„å±æ€§æ¥è¦†ç›–è¶…ç±»å±æ€§ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦å–å€¼æ–¹æ³•(`getter`)çš„å±æ€§æ¥è¦†ç›–ã€‚

å¯ä»¥åœ¨ä¸»æ„é€ å™¨çš„å±æ€§å£°æ˜ä¸­ä½¿ç”¨ `override` å…³é”®å­—ï¼Œè¦†ç›–ä¸»æ„é€ å™¨ä¸­çš„å±æ€§ã€‚

å¯ä»¥ä½¿ç”¨ä¸€ä¸ª `var` å±æ€§è¦†ç›–ä¸€ä¸ª `val` å±æ€§ï¼Œä½†ä¸å¯ä»¥åè¿‡æ¥ä½¿ç”¨ä¸€ä¸ª `val` å±æ€§è¦†ç›–ä¸€ä¸ª `var` å±æ€§ã€‚ å…è®¸è¿™ç§è¦†ç›–çš„åŸå› æ˜¯ï¼Œ `val` å±æ€§æœ¬è´¨ä¸Šåªæ˜¯å®šä¹‰äº†ä¸€ä¸ª `get` æ–¹æ³•ï¼Œä½¿ç”¨ `var` å±æ€§æ¥è¦†ç›–å®ƒï¼Œ åªæ˜¯å‘åä»£ç±»ä¸­æ·»åŠ äº†ä¸€ä¸ª `set` æ–¹æ³•ã€‚


```kotlin
// nameå±æ€§æ˜¯opençš„ï¼Œå®ƒå¯ä»¥åœ¨å­ç±»ä¸­è¢«è¦†ç›–
open class Engineer(open var name: String = "", var age: Int = 0, var language: String = "") {
    
    open val a: Int
        get() = 100
        
    open val b: Int = 100

    open var c:Int = 100
}

// è¦†ç›–äº†è¶…ç±»ä¸­çš„nameå±æ€§
open class BigEngineer(override var name: String = "", age: Int = 0, var level: Int = 0)
    : Engineer(name, age, "en") {
    
    // å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å™¨æˆ–getteræ–¹æ³•å¯¹å±æ€§è¿›è¡Œè¦†ç›–ï¼Œéƒ½æ˜¯å…è®¸çš„ã€‚
    override val a: Int = 100
    
    override var b = 0
        get() = 1
        
    // è¿™å¥æ˜¯ç¼–è¯‘é”™è¯¯çš„ï¼Œå› ä¸ºvalå˜é‡ä¸èƒ½è¦†ç›–varå˜é‡
    // override val c:Int = 1
}
```

### è¦†ç›–çš„åŸåˆ™

åœ¨ `Kotlin` ä¸­ï¼Œ ç±»ç»§æ‰¿ä¸­çš„æ–¹æ³•å®ç°é—®é¢˜, éµå®ˆä»¥ä¸‹è§„åˆ™: å¦‚æœä¸€ä¸ªç±»ä»å®ƒçš„ç›´æ¥è¶…ç±»ä¸­ç»§æ‰¿äº†åŒä¸€ä¸ªæˆå‘˜çš„å¤šä¸ªå®ç°ï¼Œé‚£ä¹ˆè¿™ä¸ªå­ç±»å¿…é¡»è¦†ç›–è¿™ä¸ªæˆå‘˜ï¼Œå¹¶æä¾›ä¸€ä¸ªè‡ªå·±çš„å®ç°ï¼Œè¿™æ ·åœ¨å­ç±»ä¸­æ¶ˆé™¤æ­§ï¼Œä¸ºäº†è¡¨ç¤ºä½¿ç”¨çš„æ–¹æ³•æ˜¯ä»å“ªä¸ªè¶…ç±»ç»§æ‰¿å¾—åˆ°çš„ï¼Œ æˆ‘ä»¬ä½¿ç”¨ `super` å…³é”®å­—, å°†è¶…ç±»åç§°æ”¾åœ¨å°–æ‹¬å·ç±», æ¯”å¦‚ `super<çˆ¶ç±»>`ã€‚

```kotlin

open class ClsA {
    open val a = 100
    open fun test() {}
}

interface ClsB {
    val a: Int
    fun test() {}
}

class ClsC : ClsA(), ClsB {
    // å±æ€§çš„è¦†ç›–ä¸å­˜åœ¨è¿™æ ·çš„é—®é¢˜
    override val a = 1000
    
    // æ–¹æ³•çš„è¦†ç›–
    // æ­¤æ—¶ç¼–è¯‘å™¨å¼ºåˆ¶å¿…é¡»å®ç°test()æ–¹æ³•,å› ä¸ºå¯ä»¥ä»è¶…ç±»ä¸­ç»§æ‰¿å¤šä¸ªå®ç°
    override fun test() {
        // æ˜ç¡®çš„è°ƒç”¨çˆ¶ç±»ä¸­çš„æ–¹æ³•
        super<ClsA>.test()
        super<ClsB>.test()
    }
}
```
